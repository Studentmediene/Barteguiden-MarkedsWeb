<!--
~ Copyright 2015 Studentmediene i Trondheim AS
~
~ Licensed under the Apache License, Version 2.0 (the "License");
~ you may not use this file except in compliance with the License.
~ You may obtain a copy of the License at
~
~ http://www.apache.org/licenses/LICENSE-2.0
~
~ Unless required by applicable law or agreed to in writing, software
~ distributed under the License is distributed on an "AS IS" BASIS,
~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
~ See the License for the specific language governing permissions and
~ limitations under the License.
-->
<div class="form-group has-feedback"  ng-class="{'has-error': form.Title.$invalid, 'has-success': form.Title.$valid}">
  <label class="col-sm-2 control-label">Tittel</label>
  <div class="col-sm-10">
    <input type="text" ng-minlength="2" ng-maxlength="120" class="form-control" name="Title" ng-model="event.title" placeholder="Tittel på arrangementet" required>
  </div>
</div>

<div class="form-group" ng-class="{'has-error': form.Place.$invalid, 'has-success': form.Place.$valid}">
  <label class="col-sm-2 control-label">Sted</label>
  <div class="col-sm-10">
    <select name="Place" id="mySelect"
            required
            ng-options="venue as venue.name for venue in venues"
            ng-model="event.venue"><option value = "">Velg sted</option></select>
 </div>
</div>

<div class="form-group" ng-class="{'has-error': form.startDatePicker.$invalid, 'has-success': form.startDatePicker.$valid}">
  <label class="col-sm-2 control-label">Starttidspunkt</label>
  <div class="col-sm-6">
    <div class="input-group">
      <input type="text" class="form-control" datetime-picker="dd. MMMM yyyy HH:mm" datepicker-options="dateOptions"
        ng-model="event.startAt" is-open="datepicker.startDatePicker"  name="startDatePicker"
        timepicker-options="timeOptions" min-date="minDate" max-date="maxDate" required/>
      <span class="input-group-btn">
        <button type="button" class="btn btn-default"
          ng-click="open($event, 'startDatePicker')"><i class="glyphicon glyphicon-calendar"></i>
        </button>
      </span>
    </div>
  </div>
</div>

<div class="form-group" ng-class="{'has-error': form.endDatePicker.$invalid, 'has-success': form.endDatePicker.$valid}">
  <label class="col-sm-2 control-label">Sluttidspunkt</label>
  <div class="col-sm-6">
    <div class="input-group">
      <input type="text" class="form-control" datetime-picker="dd. MMMM yyyy HH:mm" datepicker-options="dateOptions"
        ng-model="event.endAt" is-open="datepicker.endDatePicker"  name="endDatePicker"
        timepicker-options="timeOptions" min-date="minDate" max-date="maxDate"/>
      <span class="input-group-btn">
        <button type="button" class="btn btn-default"
          ng-click="open($event, 'endDatePicker')"><i class="glyphicon glyphicon-calendar"></i>
        </button>
      </span>
    </div>
  </div>

</div>


<div class="form-group" ng-class="{'has-error': form.Category.$invalid, 'has-success': form.Category.$valid}">
  <label class="col-sm-2 control-label">Kategori</label>
  <div class="col-sm-4">
    <select class="form-control" ng-init="event.category = 'OTHER'" ng-model="event.category"
      ng-options="category.id as category.name for category in categoryOptions" name="Category">
    </select>
    <span class="help-block">Velg kategori fra listen.</span>
  </div>
</div>
<div class="form-group has-feedback" ng-class="{'has-error': form.Price.$invalid, 'has-success': form.Price.$valid}">
  <label class="col-sm-2 control-label">Pris i kroner</label>
  <div class="col-sm-4">
    <input type="number" min="0" name="Price" ng-model="event.price" class="form-control" placeholder="Pris" required>
    <span class="help-block">Skriv 0 hvis gratis.</span>
  </div>
</div>

<div class="form-group" ng-class="{'has-error': form.Tags.$invalid, 'has-success': form.Tags.$valid}">
  <label class="col-sm-2 control-label">Merkelapper</label>
  <div class="col-sm-10">
    <input type="text" class="form-control" name="Tags" ng-model="event.tags" placeholder="Merkelapper" ng-list>
     <span class="help-block">Skriv inn merkelapper kommaseparert. Eks: UKA, Isfit.</span>
  </div>
</div>


<div class="form-group" ng-class="{'has-error': form.Age.$invalid, 'has-success': form.Age.$valid}">
  <label class="col-sm-2 control-label">Aldersgrense</label>
  <div class="col-sm-10">
    <label class="radio-inline">
      <input type="radio" ng-model="event.ageLimit" name="Age" ng-value="{{0}}" required> Ingen
    </label>
    <label class="radio-inline">
      <input type="radio" ng-model="event.ageLimit" name="Age" ng-value="{{18}}" required> 18
    </label>
    <label class="radio-inline">
      <input type="radio" ng-model="event.ageLimit" name="Age" ng-value="{{20}}" required> 20
    </label>
  </div>
</div>

<div class="form-group" ng-class="{'has-error': form.Promoted.$invalid, 'has-success': form.Promoted.$valid}">
  <label class="col-sm-2 control-label">Promotert</label>
  <div class="col-sm-10">
    <label class="radio-inline">
      <input type="radio" ng-model="event.isPromoted" name="Promoted" ng-value="{{false}}" required> Nei
    </label>
    <label class="radio-inline">
      <input type="radio" ng-model="event.isPromoted" name="Promoted" ng-value="{{true}}" required> Ja
    </label>
  </div>
</div>

<div class="form-group has-feedback" ng-class="{'has-error': form.Description.$invalid, 'has-success': form.Description.$valid}">
  <label class="col-sm-2 control-label">Beskrivelse</label>
  <div class="col-sm-10">
    <textarea ng-minlength="30" name="Description" ng-model="event.description" class="form-control" rows="6" required></textarea>
  </div>
</div>

<div class="form-group has-feedback" ng-class="{'has-error': form.ImageUrl.$invalid, 'has-success': form.ImageUrl.$valid}" >
  <label class="col-sm-2 control-label">Bilde</label>
  <div class="col-sm-10">
    <input type="file" file-model="image.image" accept="image/*" required>
    <span class="help-block">Bildet må være .png eller .jpg eller .gif</span>
    <button ng-click="uploadImage($event)" class="btn btn-info">Last opp bilde</button>
    <img class="img-responsive" ng-src="{{event.imageUrl}}"/>
  </div>
</div>

<div class="form-group has-feedback" ng-class="{'has-error': form.ImageUrl.$invalid, 'has-success': form.ImageUrl.$valid}" >
  <label class="col-sm-2 control-label">Bilde-URL</label>
  <div class="col-sm-10">
    <input type="url" name="ImageUrl" ng-model="event.imageUrl" class="form-control" required>
    <span class="help-block">
      Bilde-URL blir satt etter du laster opp et bilde. Man må ikke laste opp et bilde.
    </span>
  </div>
</div>

<div class="form-group has-feedback" ng-class="{'has-error': form.ExternalUrl.$invalid, 'has-success': form.ExternalUrl.$valid}">
  <label class="col-sm-2 control-label">Ekstern URL til arrangementet</label>
  <div class="col-sm-10">
    <input type="url" class="form-control" name="ExternalUrl" ng-model="event.eventUrl" placeholder="http://www.enellerannennettside.no/arrangementet" required>
    <span class="help-block">Legg inn ekstern lenke til arrangementet ditt her.</span>

  </div>
</div>
<div class="alert alert-warning" ng-show="form.$invalid && form.$dirty">Noe i skjemaet er ugyldig. Fiks det og prøv igjen.</div>
<div class="alert alert-info" ng-hide="form.$invalid">Alt ser ut til å være OK. Trykk "lagre" dersom du er ferdig.</div>

<button type="submit" class="btn btn-md btn-info col-sm-2 col-sm-offset-10" ng-disabled="form.$invalid"><span class="glyphicon glyphicon-floppy-disk"></span> Lagre</button>
</br></br>
<button class="btn btn-md btn-info col-sm-2 col-sm-offset-10" ng-disabled="form.$invalid" ng-click="saveAndContinue($event)"><span class="glyphicon glyphicon-floppy-disk"></span> Lagre kopi</button>
